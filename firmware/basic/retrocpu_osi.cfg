# ============================================================================
# RetroCPU Linker Configuration for OSI BASIC
# Based on osi.cfg from mist64/msbasic
#
# Memory Layout:
#   $0000-$00FF : Zero Page (256 bytes)
#   $8000-$BFFF : BASIC ROM (16 KB = $4000 bytes)
#
# Key Change from OSI:
#   OSI:      BASROM start = $A000, size = $3F00
#   RetroCPU: BASROM start = $8000, size = $4000
# ============================================================================

MEMORY {
	ZP:		start = $0000, size = $0100, type = rw;
	BASROM:		start = $8000, size = $4000, fill = yes, fillval = $EA, file = %O;
	DUMMY:		start = $0000, size = $00FF, file = "";
}

SEGMENTS {
	ZEROPAGE:	load = ZP, type = zp;
	HEADER:		load = BASROM,	type = ro;
	VECTORS:	load = BASROM,	type = ro;
	KEYWORDS:	load = BASROM,	type = ro;
	ERROR:		load = BASROM,	type = ro;
	CODE:		load = BASROM,	type = ro;
	CHRGET:		load = BASROM,	type = ro;
	INIT:		load = BASROM,	type = ro;
	EXTRA:		load = BASROM,	type = ro;
	DUMMY:		load = DUMMY; # don't include
}

# Notes:
#   - fill = yes, fillval = $EA fills unused space with NOP instructions
#   - size = $4000 is 16 KB (full BASIC ROM space)
#   - Segments are placed in the order listed
#   - HEADER segment should contain entry point at $8000
